<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="myoa.dao.DepartmentDao">
	<resultMap type="Department" id="DepartmentRM">
		<id column="id" property="id" />
		<result column="name" property="name" />
		<result column="description" property="description" />
		<result column="status" property="status" />
	</resultMap>
	<select id="getAll" resultMap="DepartmentRM">
		select * from Department
	</select>
	<update id="update" parameterType="Department">
		update Department set name = #{name},description = #{description},status = #{status} WHERE id = #{id}
	</update>
	<insert id="add" parameterType="Department">
		INSERT INTO Department VALUES (#{id}, #{name}, #{description}, #{status})
	</insert>
	<delete id="delete" parameterType="int">
		delete from Department where id = #{id}
	</delete>
	<select id="fetchById" parameterType="int" resultType="Department">
		select * from Department where id = #{id}
	</select>
	<select id="checkIsUsing" parameterType="int" resultType="int">
		select count(id) from Employee where departmentId = #{id}
	</select>
	<select id="checkNameIsUsing" resultType="int">
		select count(id) from Department where name = #{name}
	</select>
</mapper>